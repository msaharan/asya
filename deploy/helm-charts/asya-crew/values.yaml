# Default values for asya-crew chart
# Deploys system actors with reserved roles (happy-end, error-end)

# Happy-end actor configuration
# Persists successful results to S3 and reports to gateway
happy-end:
  enabled: true
  name: happy-end
  transport: "" # required
  scaling:
    enabled: true
    minReplicas: 1
    maxReplicas: 10
    pollingInterval: 10
    cooldownPeriod: 60
    queueLength: 5
  workload:
    kind: Deployment
    template:
      spec:
        containers:
        - name: asya-runtime
          image: asya-crew:latest
          imagePullPolicy: IfNotPresent
          env:
          - name: ASYA_HANDLER
            value: handlers.end_handlers.happy_end_handler
          # Gateway URL for result reporting (uncomment to enable)
          # - name: ASYA_GATEWAY_URL
          #   value: "http://asya-gateway:8080"
          # S3/MinIO storage configuration (uncomment to enable)
          # - name: ASYA_S3_BUCKET
          #   value: "asya-results"
          # - name: ASYA_S3_ENDPOINT
          #   value: "http://minio:9000"
          # - name: ASYA_S3_REGION
          #   value: "us-east-1"
          # - name: ASYA_S3_ACCESS_KEY
          #   value: "minioadmin"
          # - name: ASYA_S3_SECRET_KEY
          #   value: "minioadmin"
          resources:
            requests:
              cpu: 50m
              memory: 64Mi
            limits:
              cpu: 200m
              memory: 128Mi

# Error-end actor configuration
# Handles retries with exponential backoff and DLQ
error-end:
  enabled: true
  name: error-end
  transport: "" # required
  scaling:
    enabled: true
    minReplicas: 1
    maxReplicas: 10
    pollingInterval: 10
    cooldownPeriod: 60
    queueLength: 5
  workload:
    kind: Deployment
    template:
      spec:
        containers:
        - name: asya-runtime
          image: asya-crew:latest
          imagePullPolicy: IfNotPresent
          env:
          - name: ASYA_HANDLER
            value: handlers.end_handlers.error_end_handler
          # Gateway URL for result reporting (uncomment to enable)
          # - name: ASYA_GATEWAY_URL
          #   value: "http://asya-gateway:8080"
          resources:
            requests:
              cpu: 50m
              memory: 64Mi
            limits:
              cpu: 200m
              memory: 128Mi
